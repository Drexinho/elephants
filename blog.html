<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Blog | Kroměříž Elephants – Klub amerického fotbalu</title>
  <meta name="description" content="Novinky a články klubu amerického fotbalu Kroměříž Elephants." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <script src="/src/main.js" type="module"></script>
</head>
<body class="font-sans antialiased text-primary-900 min-h-screen">
  <div id="page-loader" class="loader" role="status" aria-live="polite" aria-label="Načítání stránky">
    <div class="loader-football-wrap">
      <img src="/images/loader.png" alt="" class="loader-football w-[400px] h-[400px] object-contain" width="400" height="400" />
    </div>
    <p class="mt-4 text-sm text-primary-600">Načítám…</p>
  </div>

  <header class="site-header fixed top-0 left-0 right-0 z-50 backdrop-blur-xl border-b border-primary-800/20">
    <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between h-16 md:h-20">
      <a href="index.html" class="flex items-center gap-3">
        <img src="/images/logo.jpg" alt="Logo Kroměříž Elephants" class="h-10 w-10 object-contain rounded-full bg-primary-100" onerror="this.style.display='none'" />
        <span class="text-xl font-bold tracking-tight text-primary-900">Kroměříž Elephants<span class="text-primary-700">.</span></span>
      </a>
      <div class="hidden md:flex items-center gap-6 lg:gap-8">
        <a href="index.html" class="text-primary-700 hover:text-primary-900 transition">Domů</a>
        <a href="blog.html" class="text-primary-800 font-semibold">Blog</a>
        <a href="index.html#kontakt" class="text-primary-700 hover:text-primary-900 transition">Staň se slonem!</a>
        <a href="admin.html" class="text-primary-600 text-sm hover:text-primary-900 transition">Admin</a>
        <a data-contact="phone" href="#" class="inline-flex items-center text-primary-700 hover:text-primary-900 transition" aria-label="Zavolat">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg>
        </a>
        <a data-contact="instagram" href="#" target="_blank" rel="noopener noreferrer" class="text-primary-700 hover:text-primary-900 transition" aria-label="Instagram">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
        </a>
        <a href="index.html#kontakt" class="inline-flex items-center gap-2 px-4 py-2 bg-primary-700 hover:bg-primary-800 text-white font-semibold rounded-xl transition">Staň se slonem!</a>
      </div>
      <button id="menu-btn" class="md:hidden p-2 text-primary-600 hover:text-primary-900" aria-label="Otevřít menu" aria-expanded="false" aria-controls="mobile-menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
      </button>
    </nav>
    <div id="mobile-menu" class="hidden md:hidden border-t border-primary-200 px-4 sm:px-6 py-4" role="region" aria-label="Navigace">
      <a href="index.html" class="block py-2 text-primary-700 hover:text-primary-900">Domů</a>
      <a href="blog.html" class="block py-2 text-primary-800 font-semibold">Blog</a>
      <a href="index.html#kontakt" class="block py-2 text-primary-700 hover:text-primary-900">Staň se slonem!</a>
      <a href="admin.html" class="block py-2 text-primary-600 text-sm">Admin</a>
      <a data-contact="phone" href="#" class="flex items-center py-2 text-primary-700 hover:text-primary-900" aria-label="Zavolat"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg></a>
      <a data-contact="instagram" href="#" target="_blank" rel="noopener noreferrer" class="flex items-center gap-2 py-2 text-primary-700 hover:text-primary-900" aria-label="Instagram">Instagram</a>
      <a href="index.html#kontakt" class="block py-2 font-semibold text-primary-800">Staň se slonem!</a>
    </div>
  </header>

  <main class="pt-28 pb-16 md:pb-20">
    <section class="py-8 md:py-12">
      <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-3xl shadow-xl shadow-primary-900/10 p-8 md:p-14">
          <div class="max-w-4xl mx-auto">
            <h1 class="text-3xl md:text-4xl font-bold text-primary-900 mb-2">Blog</h1>
            <p class="text-primary-600 mb-10">Oznámení a články z klubu.</p>

            <div id="blog-list" class="space-y-8">
              <!-- Naplní JS -->
            </div>

            <div id="blog-single" class="hidden">
              <a href="blog.html" class="inline-flex items-center gap-2 text-primary-600 hover:text-primary-800 font-semibold mb-8 transition">← Zpět na blog</a>
              <article id="blog-single-content"></article>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="bg-primary-900 text-primary-200 py-6 md:py-8">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="text-center md:text-left">
          <p class="font-bold text-white text-sm">Kroměříž Elephants</p>
          <p class="text-primary-300 font-medium text-xs mt-0.5">Síla, Respekt, Vítězství</p>
          <p class="text-primary-400 text-xs mt-0.5">Klub amerického fotbalu</p>
        </div>
        <div class="flex flex-wrap items-center justify-center gap-4">
          <a data-contact="phone" href="#" class="inline-flex text-primary-200 hover:text-white text-xs transition" aria-label="Zavolat"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/></svg></a>
          <a data-contact="instagram" href="#" target="_blank" rel="noopener noreferrer" class="text-primary-200 hover:text-white text-xs transition" aria-label="Instagram">Instagram</a>
          <a href="index.html#kontakt" class="text-primary-200 hover:text-white text-xs font-semibold transition">Staň se slonem!</a>
        </div>
        <p class="text-primary-400 text-xs">© 2025 Kroměříž Elephants. Všechna práva vyhrazena.</p>
      </div>
    </div>
  </footer>

  <script type="module">
    import { getPosts, getPostBySlug, loadPostsFromServer } from '/src/data/posts.js'

    function escapeHtml(s) {
      const div = document.createElement('div')
      div.textContent = s
      return div.innerHTML
    }

    const listEl = document.getElementById('blog-list')
    const singleWrap = document.getElementById('blog-single')
    const singleContent = document.getElementById('blog-single-content')

    function renderList() {
      const posts = getPosts().sort((a, b) => new Date(b.date) - new Date(a.date))
      listEl.innerHTML = posts.map(p => `
        <article class="border-b border-primary-100 pb-8 last:border-0 last:pb-0">
          <a href="blog.html#${p.slug}" class="group block py-2">
            <p class="text-sm text-primary-500">${new Date(p.date).toLocaleDateString('cs-CZ')}</p>
            <h2 class="mt-2 text-xl font-bold text-primary-900 group-hover:text-primary-700 transition">${escapeHtml(p.title)}</h2>
            <p class="mt-2 text-primary-600">${escapeHtml(p.excerpt)}</p>
          </a>
        </article>
      `).join('')
    }

    function renderSingle(post) {
      const imageHtml = post.image
        ? `<img src="${escapeHtml(post.image)}" alt="" class="mt-8 w-full max-w-full h-auto rounded-2xl" loading="lazy" />`
        : ''
      singleContent.innerHTML = `
        <p class="text-sm text-primary-500">${new Date(post.date).toLocaleDateString('cs-CZ')}</p>
        <h2 class="mt-2 text-3xl font-bold text-primary-900">${escapeHtml(post.title)}</h2>
        <div class="mt-6 text-primary-600 whitespace-pre-wrap">${escapeHtml(post.body)}</div>
        ${imageHtml}
      `
      listEl.classList.add('hidden')
      singleWrap.classList.remove('hidden')
    }

    function showList() {
      singleWrap.classList.add('hidden')
      listEl.classList.remove('hidden')
      renderList()
    }

    ;(async () => {
      await loadPostsFromServer()
      const hash = window.location.hash.slice(1)
      if (hash) {
        const post = getPostBySlug(hash)
        if (post) renderSingle(post)
        else showList()
      } else {
        showList()
      }
    })()

    window.addEventListener('hashchange', () => {
      const h = window.location.hash.slice(1)
      if (!h) showList()
      else {
        const post = getPostBySlug(h)
        if (post) renderSingle(post)
        else showList()
      }
    })
  </script>
</body>
</html>
