const a="elephants_blog_posts",u=[{id:"1",title:"Úvodní trénink sezóny 2025",excerpt:"První trénink v nové sezóně proběhne v sobotu. Všichni hráči jsou zváni.",body:"Těšíme se na všechny členy klubu. Sraz na hřišti v 9:00. Přineste si pití a sportovní oblečení.",date:"2025-02-01",slug:"uvodni-trenink-sezony-2025"},{id:"2",title:"Zápas s Lokomotivou",excerpt:"Oznamujeme termín přátelského zápasu s týmem Lokomotiva.",body:"Přátelský zápas se uskuteční v neděli 15. 2. 2025. Místo konání: naše hřiště. Začátek v 14:00.",date:"2025-02-10",slug:"zapas-s-lokomotivou"},{id:"3",title:"Vítejte na stránkách Kroměříž Elephants",excerpt:"Klub amerického fotbalu Kroměříž Elephants vás vítá.",body:"Jsme amatérský klub amerického fotbalu. Trénujeme pravidelně a účastníme se ligových i přátelských zápasů. Chcete-li se přidat, napište nám nebo přijďte na trénink.",date:"2025-01-15",slug:"vitejte-elephants"}];let r=null;async function y(){try{const t=await fetch("/api/posts");if(t.ok){const e=await t.json();if(Array.isArray(e)&&e.length>=0){r=e;try{localStorage.setItem(a,JSON.stringify(e))}catch{}return e}}}catch{}try{const t=localStorage.getItem(a);if(t){const e=JSON.parse(t);if(Array.isArray(e))return r=e,e}}catch{}return r=u,u}function h(){if(r!==null)return r;try{const t=localStorage.getItem(a);if(t){const e=JSON.parse(t);if(Array.isArray(e)&&e.length>0)return e}}catch{}return u}async function m(t){try{const e=await fetch("/api/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"}),n=await e.json().catch(()=>({}));if(e.ok&&n.ok){r=t;try{localStorage.setItem(a,JSON.stringify(t))}catch{}return{ok:!0}}return{ok:!1,error:n.error||"Chyba ukládání",unauthorized:e.status===401}}catch{try{localStorage.setItem(a,JSON.stringify(t)),r=t}catch{}return{ok:!1,error:"Připojení k serveru selhalo. Data jsou uložena jen lokálně."}}}function k(t){return h().find(e=>e.slug===t)||null}function v(t){return h().find(e=>e.id===t)||null}function f(t){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}function S({title:t,excerpt:e,body:n,date:o,image:s}){const i=f(t);return{id:Date.now().toString(36)+Math.random().toString(36).slice(2),title:t,excerpt:e,body:n,date:o,slug:i,image:s?.trim()||null}}function b(t,e,{title:n,excerpt:o,body:s,date:i,image:d}){const l=t.findIndex(p=>p.id===e);if(l===-1)return t;const g=f(n),c=[...t];return c[l]={...c[l],title:n,excerpt:o,body:s,date:i,slug:g,image:d?.trim()||null},c}function P(t,e){return t.filter(n=>n.id!==e)}export{k as a,v as b,S as c,P as d,h as g,y as l,m as s,b as u};
